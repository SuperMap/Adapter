<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>TransferSuperMapLine</title>
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.11/themes/css/cartodb.css" />
    <script src="http://libs.cartocdn.com/cartodb.js/v3/3.11/cartodb.js"></script>
    <script type="text/javascript" src="../SuperMap.js"></script>
    <script type="text/javascript" src="iConnectorLeaflet.js"></script>
    <script type="text/javascript">
        var map,url = "http://support.supermap.com.cn:8090/iserver/services/map-china400/rest/maps/China";
        function init(){
            var map = L.map('map').setView([40,116], 4);
            L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',
                maxZoom: 18
            }).addTo(map);

            var points = [
                new SuperMap.Geometry.Point(116.5,41.5),
                new SuperMap.Geometry.Point(115.5,38.5),
                new SuperMap.Geometry.Point(118,40.5),
                new SuperMap.Geometry.Point(115,40.5),
                new SuperMap.Geometry.Point(118,38.5),
                new SuperMap.Geometry.Point(116.5,41.5)
            ];
            var line = new SuperMap.Geometry.LineString(points);
            var gLine = SuperMap.Web.iConnector.Leaflet.transferLine([line])[0];
            gLine.addTo(map);
            cartodb.createLayer(map, 'http://documentation.cartodb.com/api/v2/viz/2b13c956-e7c1-11e2-806b-5404a6a683d5/viz.json')
                    .addTo(map);
        }
    </script>
</head>
<body onload="init()">
<div id ="map"style="width: 1100px; height: 700px"></div>

</body>
</html>